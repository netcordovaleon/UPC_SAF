@model SAF.Web.Models.InvitacionModel


@Html.HiddenFor(c => c.codigoPublicacionBusqueda)
@Html.HiddenFor(c => c.codigoServicioAudBusqueda)

<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Busqueda Auditores Financieros</h4>
        </div>
        <div class="modal-body">
            

            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#tabsMejorEquipo" aria-controls="home" role="tab" data-toggle="tab">Mejor Equipo</a></li>
                <li role="presentation"><a href="#tabsAuditoresAptos" aria-controls="profile" role="tab" data-toggle="tab">Busqueda Auditores</a></li>
            </ul>

            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="tabsMejorEquipo">

                     

                    <table id="tabMejorEquipo" class="table table-striped table-bordered" cellpadding="0" cellspacing="0" border="0"></table>

                     

                </div>
                <div role="tabpanel" class="tab-pane" id="tabsAuditoresAptos">
                    <table id="tabAuditoresAptos" class="table table-striped table-bordered" cellpadding="0" cellspacing="0" border="0"></table>
                </div>
            </div>


            

        </div>
        <div class="modal-footer">
            <input type="button" class="btn btn-default" id="btnCancelar" value="Cerrar" data-dismiss="modal" />
        </div>
    </div>
</div>
<script type="text/javascript">


    var tabMejorEquipo;
    var tabAuditoresAptos;


    var _dataMejorEquipo_ = null;
    var _dataAuditoresAptos_ = null;


    $(document).ready(function () {
        listarMejorEquipo();
    });

    function listarMejorEquipo() {

        if (tabMejorEquipo == undefined) {
            tabMejorEquipo = $("#tabMejorEquipo").dataTable({
                "info": false,
                "bServerSide": false,
                "data": _dataMejorEquipo_,
                "order": [[1, "asc"]],
                "columns": [
                    {
                        "bSortable": false,
                        "sClass": "center",
                        "sWidth": "5%",
                        "render": function (data, type, row) {
                            return '<center><button class="btn btn-primary" title="Abrir" type="button" onclick="abrirPublicacion(' + row[0] + ');"><i class="fa fa-search-plus"></i></button></center>';
                        }
                    },
                    { "sTitle": "Auditor" },
                    { "sTitle": "Cargo" },
                    { "sTitle": "Ptos. Experiencia", "sClass": "center" },
                    { "sTitle": "Ptos. Capacitacion", "sClass": "center" },
                    { "sTitle": "Ptos.q Totales", "sClass": "center" },
                    { "sTitle": "Hrs. Disponible", "sClass": "center" }
                ]

            });
        }

        $.ajax({
            url: '@Url.Action("ListarMejorEquipo", "InvitacionAuditor")',
            type: 'POST',
            async: false,
            data: { idPub: $("#codigoPublicacionBusqueda").val(), idSerAud: $("#codigoServicioAudBusqueda").val() },
            success: function (result) {
                _dataMejorEquipo_ = result;
                tabMejorEquipo.fnReloadData(_dataMejorEquipo_);
            }
        });
    }


    function listarAuditoresAptos() {

        if (tabAuditoresAptos == undefined) {
            tabAuditoresAptos = $("#tabAuditoresAptos").dataTable({
                "info": false,
                "bServerSide": false,
                "data": _dataAuditoresAptos_,
                "order": [[1, "asc"]],
                "columns": [
                    {
                        "bSortable": false,
                        "sClass": "center",
                        "sWidth": "5%",
                        "render": function (data, type, row) {
                            return '<center><button class="btn btn-primary" title="Abrir" type="button" onclick="abrirPublicacion(' + row[0] + ');"><i class="fa fa-search-plus"></i></button></center>';
                        }
                    },
                    { "sTitle": "Auditor" },
                    { "sTitle": "Cargo" },
                    { "sTitle": "Ptos. Experiencia", "sClass": "center" },
                    { "sTitle": "Ptos. Capacitacion", "sClass": "center" },
                    { "sTitle": "Ptos.q Totales", "sClass": "center" },
                    { "sTitle": "Hrs. Disponible", "sClass": "center" }
                ]

            });
        }

        $.ajax({
            url: '@Url.Action("ListarMejorEquipo", "InvitacionAuditor")',
            type: 'POST',
            async: false,
            data: { idPub: $("#codigoPublicacionBusqueda").val(), idSerAud: $("#codigoServicioAudBusqueda").val() },
            success: function (result) {
                _dataAuditoresAptos_ = result;
                tabAuditoresAptos.fnReloadData(_dataAuditoresAptos_);
            }
        });
    }

</script>